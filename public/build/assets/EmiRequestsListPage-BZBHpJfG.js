import{_ as x}from"./AppDataTable.vue_vue_type_script_setup_true_lang-Crl3AWHl.js";import{l as P,f as k,a as V}from"./formatters-RLvmmGlr.js";import{s as z,g as C,a as E,b as T}from"./emi-BSQU73Zb.js";import{d as I,o as W,c as w,a,w as t,r,b as B,V as A,e as f,f as y,u as o,t as i,g as s,n as N,h as g,i as h}from"./main-C3pukc5B.js";import{V as R}from"./VDataTable-CaI0BRNl.js";const U={class:"d-flex align-center gap-2"},q={class:"ml-3"},M={class:"d-flex align-center gap-2"},S={class:"ml-3"},D={style:{"min-width":"150px"},class:"d-flex align-center"},L={class:"text-capitalize"},H=I({__name:"EmiRequestsListPage",setup(O){const v=[{title:"REQUEST#",key:"application_code",sortable:!1,minWidth:"120"},{title:"User",key:"user",sortable:!1,minWidth:"200"},{title:"Product",key:"product",sortable:!1,minWidth:"250"},{title:"Time",key:"time",minWidth:"160",sortable:!1},{title:"Per Month",key:"emi_per_month",minWidth:"120",sortable:!1},{title:"EMI Type",key:"emi_type",sortable:!1,minWidth:"120"},{title:"Status",key:"status_label",sortable:!1},{title:"Actions",key:"action",sortable:!1}],p=r([]),d=r(0),u=r(!1),m=r({page:1,itemsPerPage:15,sortBy:[]}),c=r(!1);async function _(){u.value=!0;try{const{data:l}=await P({page:m.value.page,per_page:m.value.itemsPerPage}),n=Array.isArray(l)?l:l?.data??[];p.value=n,d.value=l?.total??l?.meta?.total??n.length}finally{u.value=!1}}function b(l){m.value=l,c.value||(c.value=!0),_()}return W(()=>{c.value||(_(),c.value=!0)}),(l,n)=>(B(),w("div",null,[a(x,{headers:v,items:p.value,total:d.value,loading:u.value,"items-per-page":m.value.itemsPerPage,"onUpdate:options":b},{"item.user":t(({item:e})=>[s("div",U,[a(g,{size:"32"},{default:t(()=>[a(h,{src:e.user?.avatar,alt:"User"},null,8,["src"])]),_:2},1024),s("span",q,i(e.user?.name??"-"),1)])]),"item.product":t(({item:e})=>[s("div",M,[a(g,{size:"32",rounded:""},{default:t(()=>[a(h,{src:e.product?.thumb,alt:"Product"},null,8,["src"])]),_:2},1024),s("span",S,i(e.product?.name??"-"),1)])]),"item.time":t(({item:e})=>[s("span",null,i(o(V)(e.time)),1)]),"item.emi_per_month":t(({item:e})=>[s("span",null,i(o(k)(e.emi_per_month)),1)]),"item.emi_type":t(({item:e})=>[s("div",D,[a(f,{start:"",class:"mr-2",color:o(E)(e.emi_type),icon:o(C)(e.emi_type)},null,8,["color","icon"]),s("span",{class:N(["text-capitalize",o(T)(e.emi_type)]),style:{"font-weight":"500"}},i(e.emi_type?e.emi_type.split("_").join(" "):"Citizenship"),3)])]),"item.emi_mode":t(({item:e})=>[s("span",L,i(e.emi_mode??"-"),1)]),"item.status_label":t(({item:e})=>[a(R,{size:"small",color:o(z)(e.status),variant:"tonal"},{default:t(()=>[y(i(e.status_label??e.status??"-"),1)]),_:2},1032,["color"])]),"item.action":t(({item:e})=>[a(A,{variant:"tonal",color:"primary",size:"x-small",to:{name:"emi.requests.detail",params:{id:e.id}},icon:""},{default:t(()=>[a(f,null,{default:t(()=>[...n[0]||(n[0]=[y("mdi-eye",-1)])]),_:1})]),_:1},8,["to"])]),_:1},8,["items","total","loading","items-per-page"])]))}});export{H as default};

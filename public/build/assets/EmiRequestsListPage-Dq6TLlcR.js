import{_ as w}from"./AppDataTable.vue_vue_type_script_setup_true_lang-BrHup8An.js";import{f as k,a as z,l as E}from"./formatters-dh-tKqzD.js";import{s as q,g as I,a as U,b as S}from"./emi-BSQU73Zb.js";import{d as W,w as A,o as B,c as N,a,b as t,V as R,e as y,f as h,u as r,t as n,g as i,n as M,h as g,i as V,j as O,k as j,l as f,m as D,r as u,p as F}from"./main-Mk75_2Bb.js";import{V as L,a as b}from"./VDataTable-CXZ8Jdy-.js";const $={class:"d-flex align-center gap-2"},Q={class:"ml-3"},G={class:"d-flex align-center gap-2"},H={class:"ml-3"},J={style:{"min-width":"150px"},class:"d-flex align-center"},K={class:"text-capitalize"},le=W({__name:"EmiRequestsListPage",setup(X){const x=[{title:"REQUEST#",key:"application_code",sortable:!1,minWidth:"120"},{title:"User",key:"user",sortable:!1,minWidth:"200"},{title:"Product",key:"product",sortable:!1,minWidth:"250"},{title:"Time",key:"time",minWidth:"160",sortable:!1},{title:"Per Month",key:"emi_per_month",minWidth:"120",sortable:!1},{title:"EMI Type",key:"emi_type",sortable:!1,minWidth:"120"},{title:"Status",key:"status_label",sortable:!1},{title:"Actions",key:"action",sortable:!1}],_=u([]),v=u(0),p=u(!1),d=u({page:1,itemsPerPage:15,sortBy:[]}),s=u({query:"",emiType:null,status:null}),m=u(!1),C=[{title:"Credit Card",value:"credit_card"},{title:"New Credit Card",value:"new_credit_card"},{title:"Citizenship",value:"citizenship"}],T=[{title:"Pending",value:0},{title:"Processing",value:1},{title:"Approved",value:2},{title:"Finished",value:3},{title:"Cancelled",value:4}];async function c(){p.value=!0;try{const o={page:d.value.page,per_page:d.value.itemsPerPage};s.value.query&&(o.search=s.value.query),s.value.emiType&&(o.emi_type=s.value.emiType),s.value.status!==null&&(o.status=s.value.status);const{data:l}=await E(o),e=Array.isArray(l)?l:l?.data??[];_.value=e,v.value=l?.total??l?.meta?.total??e.length}finally{p.value=!1}}function P(o){d.value=o,m.value||(m.value=!0),c()}return A(s,()=>{d.value.page=1,c()},{deep:!0}),B(()=>{m.value||(c(),m.value=!0)}),(o,l)=>(F(),N("div",null,[a(w,{headers:x,items:_.value,total:v.value,loading:p.value,searchable:!1,"items-per-page":d.value.itemsPerPage,"onUpdate:options":P},{actions:t(()=>[a(O,{fluid:""},{default:t(()=>[a(j,null,{default:t(()=>[a(f,{cols:"12",md:"3"},{default:t(()=>[a(D,{modelValue:s.value.query,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value.query=e),density:"compact",variant:"outlined",label:"Search","hide-details":"",clearable:"",style:{"min-width":"220px"}},null,8,["modelValue"])]),_:1}),a(f,{cols:"12",md:"3"},{default:t(()=>[a(b,{modelValue:s.value.emiType,"onUpdate:modelValue":l[1]||(l[1]=e=>s.value.emiType=e),items:C,density:"compact",variant:"outlined",label:"EMI Type","hide-details":"",clearable:"",style:{"min-width":"200px"}},null,8,["modelValue"])]),_:1}),a(f,{cols:"12",md:"3"},{default:t(()=>[a(b,{modelValue:s.value.status,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value.status=e),items:T,density:"compact",variant:"outlined",label:"Status","hide-details":"",clearable:"",style:{"min-width":"200px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),"item.user":t(({item:e})=>[i("div",$,[a(g,{size:"32"},{default:t(()=>[a(V,{src:e.user?.avatar,alt:"User"},null,8,["src"])]),_:2},1024),i("span",Q,n(e.user?.name??"-"),1)])]),"item.product":t(({item:e})=>[i("div",G,[a(g,{size:"32",rounded:""},{default:t(()=>[a(V,{src:e.product?.thumb,alt:"Product"},null,8,["src"])]),_:2},1024),i("span",H,n(e.product?.name??"-"),1)])]),"item.time":t(({item:e})=>[i("span",null,n(r(z)(e.time)),1)]),"item.emi_per_month":t(({item:e})=>[i("span",null,n(r(k)(e.emi_per_month)),1)]),"item.emi_type":t(({item:e})=>[i("div",J,[a(y,{start:"",class:"mr-2",color:r(U)(e.emi_type),icon:r(I)(e.emi_type)},null,8,["color","icon"]),i("span",{class:M(["text-capitalize",r(S)(e.emi_type)]),style:{"font-weight":"500"}},n(e.emi_type?e.emi_type.split("_").join(" "):"Citizenship"),3)])]),"item.emi_mode":t(({item:e})=>[i("span",K,n(e.emi_mode??"-"),1)]),"item.status_label":t(({item:e})=>[a(L,{size:"small",color:r(q)(e.status),variant:"tonal"},{default:t(()=>[h(n(e.status_label??e.status??"-"),1)]),_:2},1032,["color"])]),"item.action":t(({item:e})=>[a(R,{variant:"tonal",color:"primary",size:"x-small",to:{name:"emi.requests.detail",params:{id:e.id}},icon:""},{default:t(()=>[a(y,null,{default:t(()=>[...l[3]||(l[3]=[h("mdi-eye",-1)])]),_:1})]),_:1},8,["to"])]),_:1},8,["items","total","loading","items-per-page"])]))}});export{le as default};

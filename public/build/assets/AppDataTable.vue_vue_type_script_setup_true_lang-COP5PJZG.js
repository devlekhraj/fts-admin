import{k as _,aO as ee,ay as ae,x as te,L as se,a as n,C as S,p as oe,E as r,j as c,g as p,$ as le,F as B,an as re,d as ne,O as b,w as P,a2 as de,b as f,aP as ie,aQ as ue,f as ce,t as me,T,_ as ge,R as ve,aR as k,aS as pe,aD as be,aT as Pe,aU as fe}from"./main-CkhWGJSf.js";import{e as ye,f as he,g as Se,h as Te,p as De,i as Ve,j as we,u as xe,k as R,l as C,n as F,c as I,o as Be,q as ke,r as Re,s as Ce,t as Fe,v as Ie,w as $e}from"./VDataTable-BO3cy0IO.js";const He=oe({itemsLength:{type:[Number,String],required:!0},...Re(),...ke(),...Be()},"VDataTableServer"),Ne=_()({name:"VDataTableServer",props:He(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,m){let{attrs:i,slots:a}=m;const{groupBy:t}=ye(e),{initialSortOrder:o,sortBy:s,multiSort:d,mustSort:u}=he(e),{page:g,itemsPerPage:y}=Se(e),{disableSort:$}=ee(e),H=c(()=>parseInt(e.itemsLength,10)),{columns:D,headers:N}=Te(e,{groupBy:t,showSelect:r(()=>e.showSelect),showExpand:r(()=>e.showExpand)}),{items:v}=Ie(e,D),{toggleSort:V}=Ce({initialSortOrder:o,sortBy:s,multiSort:d,mustSort:u,page:g}),{opened:E,isGroupOpen:G,toggleGroup:L,extractRows:O}=Fe({groupBy:t,sortBy:s,disableSort:$}),{pageCount:j,setItemsPerPage:U}=De({page:g,itemsPerPage:y,itemsLength:H}),{flatItems:w}=$e(v,t,E,()=>!!a["group-summary"]),{isSelected:W,select:q,selectAll:z,toggleSelect:A,someSelected:M,allSelected:Q}=Ve(e,{allItems:v,currentPage:v}),{isExpanded:J,toggleExpand:K}=we(e),x=c(()=>O(v.value));xe({page:g,itemsPerPage:y,sortBy:s,groupBy:t,search:r(()=>e.search)}),re("v-data-table",{toggleSort:V,sortBy:s}),ae({VDataTableRows:{hideNoData:r(()=>e.hideNoData),noDataText:r(()=>e.noDataText),loading:r(()=>e.loading),loadingText:r(()=>e.loadingText)}});const l=c(()=>({page:g.value,itemsPerPage:y.value,sortBy:s.value,pageCount:j.value,toggleSort:V,setItemsPerPage:U,someSelected:M.value,allSelected:Q.value,isSelected:W,select:q,selectAll:z,toggleSelect:A,isExpanded:J,toggleExpand:K,isGroupOpen:G,toggleGroup:L,items:x.value.map(h=>h.raw),internalItems:x.value,groupedItems:w.value,columns:D.value,headers:N.value}));te(()=>{const h=R.filterProps(e),X=C.filterProps(se(e,["multiSort"])),Y=F.filterProps(e),Z=I.filterProps(e);return n(I,S({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Z,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(l.value),default:()=>a.default?a.default(l.value):p(B,null,[a.colgroup?.(l.value),!e.hideDefaultHeader&&p("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[n(C,S(X,{multiSort:!!e.multiSort}),a)]),a.thead?.(l.value),!e.hideDefaultBody&&p("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[a["body.prepend"]?.(l.value),a.body?a.body(l.value):n(F,S(i,Y,{items:w.value}),a),a["body.append"]?.(l.value)]),a.tbody?.(l.value),a.tfoot?.(l.value)]),bottom:()=>a.bottom?a.bottom(l.value):!e.hideDefaultFooter&&p(B,null,[n(le,null,null),n(R,h,{prepend:a["footer.prepend"]})])})})}}),Le=ne({__name:"AppDataTable",props:{title:{},headers:{},items:{},total:{},loading:{type:Boolean,default:!1},search:{default:""},searchable:{type:Boolean,default:!0},itemsPerPage:{default:10}},emits:["update:options"],setup(e){const m=e,i=c({get:()=>m.search??"",set:()=>{}}),a=c(()=>m.headers.map(t=>{const o=t.minWidth??t.width;if(!o)return t;const s=`min-width: ${typeof o=="number"?`${o}px`:o};`,d={...t.headerProps??{},style:[t.headerProps?.style,s].filter(Boolean).join(" ")},u={...t.cellProps??{},style:[t.cellProps?.style,s].filter(Boolean).join(" ")};return{...t,headerProps:d,cellProps:u}}));return(t,o)=>(f(),b(de,{class:"elevation-0"},{default:P(()=>[e.title||t.$slots.actions?(f(),b(ie,{key:0,flat:""},{default:P(()=>[e.title?(f(),b(ue,{key:0},{default:P(()=>[ce(me(e.title),1)]),_:1})):T("",!0),n(ge),e.searchable?(f(),b(ve,{key:1,modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=s=>i.value=s),density:"compact",variant:"outlined",label:"Search","hide-details":"",class:"mr-4",style:{"max-width":"240px"}},null,8,["modelValue"])):T("",!0),k(t.$slots,"actions")]),_:3})):T("",!0),n(Ne,{headers:a.value,items:e.items,"items-length":e.total,loading:e.loading,search:i.value,"items-per-page":e.itemsPerPage,"onUpdate:options":o[1]||(o[1]=s=>t.$emit("update:options",s))},pe({_:2},[be(t.$slots,(s,d)=>({name:d,fn:P(u=>[k(t.$slots,d,Pe(fe(u)))])}))]),1032,["headers","items","items-length","loading","search","items-per-page"])]),_:3}))}});export{Le as _};

import{W as pe,b2 as Pe,w as X,a3 as he,i as I,Q as se,a7 as E,ac as te,bc as Ce,$ as Be,a1 as ge,ah as q,bF as Te,ab as fe,r as ee,bG as Fe,L,aS as Ee,aa as xe,ar as Ae,aX as Le,bH as _e,o as Oe,bI as Me,b as k,a8 as ie,aE as He,n as ze,aG as ce,bv as Ne,bw as qe,bJ as Ke,aV as Ue,am as $e,an as je,Y as ye,aq as We,a0 as Ge,ap as Xe,au as ve,q as be,a9 as Ye,as as Ve,at as we,bK as Je,bL as Qe,ae as Ze,av as et,b4 as tt,bM as lt,aw as at,f as ke,ay as nt,az as ot,aA as Se,bN as ut,H as st,aB as rt,aC as it,j as ct,h as Ie,aD as dt,aF as ft,g as vt}from"./main-jtG-UPKi.js";const mt=te({renderless:Boolean,...Ce()},"VVirtualScrollItem"),pt=pe()({name:"VVirtualScrollItem",inheritAttrs:!1,props:mt(),emits:{"update:height":e=>!0},setup(e,s){let{attrs:l,emit:r,slots:a}=s;const{resizeRef:f,contentRect:p}=Pe(void 0,"border");X(()=>p.value?.height,o=>{o!=null&&r("update:height",o)}),he(()=>e.renderless?I(se,null,[a.default?.({itemRef:f})]):I("div",E({ref:f,class:["v-virtual-scroll__item",e.class],style:e.style},l),[a.default?.()]))}}),ht=-1,gt=1,me=100,yt=te({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function bt(e,s){const l=Be(),r=q(0);ge(()=>{r.value=parseFloat(e.itemHeight||0)});const a=q(0),f=q(Math.ceil((parseInt(e.height)||l.height.value)/(r.value||16))||1),p=q(0),o=q(0),c=ee(),S=ee();let u=0;const{resizeRef:R,contentRect:B}=Pe();ge(()=>{R.value=c.value});const _=L(()=>c.value===document.documentElement?l.height.value:B.value?.height||parseInt(e.height)||0),Y=L(()=>!!(c.value&&S.value&&_.value&&r.value));let y=Array.from({length:s.value.length}),w=Array.from({length:s.value.length});const P=q(0);let C=-1;function K(n){return y[n]||r.value}const U=Fe(()=>{const n=performance.now();w[0]=0;const d=s.value.length;for(let b=1;b<=d;b++)w[b]=(w[b-1]||0)+K(b-1);P.value=Math.max(P.value,performance.now()-n)},P),F=X(Y,n=>{n&&(F(),u=S.value.offsetTop,U.immediate(),O(),~C&&xe(()=>{Ae&&window.requestAnimationFrame(()=>{ue(C),C=-1})}))});Te(()=>{U.clear()});function le(n,d){const b=y[n],T=r.value;r.value=T?Math.min(r.value,d):d,(b!==d||T!==r.value)&&(y[n]=d,U())}function D(n){n=fe(n,0,s.value.length);const d=Math.floor(n),b=n%1,T=d+1,j=w[d]||0,t=w[T]||j;return j+(t-j)*b}function h(n){return Vt(w,n)}let J=0,$=0,ae=0;X(_,(n,d)=>{O(),n<d&&requestAnimationFrame(()=>{$=0,O()})});let ne=-1;function M(){if(!c.value||!S.value)return;const n=c.value.scrollTop,d=performance.now();d-ae>500?($=Math.sign(n-J),u=S.value.offsetTop):$=n-J,J=n,ae=d,window.clearTimeout(ne),ne=window.setTimeout(re,500),O()}function re(){!c.value||!S.value||($=0,ae=0,window.clearTimeout(ne),O())}let oe=-1;function O(){cancelAnimationFrame(oe),oe=requestAnimationFrame(de)}function de(){if(!c.value||!_.value||!r.value)return;const n=J-u,d=Math.sign($),b=Math.max(0,n-me),T=fe(h(b),0,s.value.length),j=n+_.value+me,t=fe(h(j)+1,T+1,s.value.length);if((d!==ht||T<a.value)&&(d!==gt||t>f.value)){const m=D(a.value)-D(T),V=D(t)-D(f.value);Math.max(m,V)>me?(a.value=T,f.value=t):(T<=0&&(a.value=T),t>=s.value.length&&(f.value=t))}p.value=D(a.value),o.value=D(s.value.length)-D(f.value)}function ue(n){const d=D(n);!c.value||n&&!d?C=n:c.value.scrollTop=d}const Q=L(()=>s.value.slice(a.value,f.value).map((n,d)=>{const b=d+a.value;return{raw:n,index:b,key:Ee(n,e.itemKey,b)}}));return X(s,()=>{y=Array.from({length:s.value.length}),w=Array.from({length:s.value.length}),U.immediate(),O()},{deep:1}),{calculateVisibleItems:O,containerRef:c,markerRef:S,computedItems:Q,paddingTop:p,paddingBottom:o,scrollToIndex:ue,handleScroll:M,handleScrollend:re,handleItemResize:le}}function Vt(e,s){let l=e.length-1,r=0,a=0,f=null,p=-1;if(e[l]<s)return l;for(;r<=l;)if(a=r+l>>1,f=e[a],f>s)l=a-1;else if(f<s)p=a,r=a+1;else return f===s?a:r;return p}const wt=te({items:{type:Array,default:()=>[]},renderless:Boolean,...yt(),...Ce(),...qe()},"VVirtualScroll"),kt=pe()({name:"VVirtualScroll",props:wt(),setup(e,s){let{slots:l}=s;const r=Le("VVirtualScroll"),{dimensionStyles:a}=Ne(e),{calculateVisibleItems:f,containerRef:p,markerRef:o,handleScroll:c,handleScrollend:S,handleItemResize:u,scrollToIndex:R,paddingTop:B,paddingBottom:_,computedItems:Y}=bt(e,ce(()=>e.items));return _e(()=>e.renderless,()=>{function y(){const P=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";p.value===document.documentElement?(document[P]("scroll",c,{passive:!0}),document[P]("scrollend",S)):(p.value?.[P]("scroll",c,{passive:!0}),p.value?.[P]("scrollend",S))}Oe(()=>{p.value=Me(r.vnode.el,!0),y(!0)}),Te(y)}),he(()=>{const y=Y.value.map(w=>k(pt,{key:w.key,renderless:e.renderless,"onUpdate:height":P=>u(w.index,P)},{default:P=>l.default?.({item:w.raw,index:w.index,...P})}));return e.renderless?I(se,null,[I("div",{ref:o,class:"v-virtual-scroll__spacer",style:{paddingTop:ie(B.value)}},null),y,I("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ie(_.value)}},null)]):I("div",{ref:p,class:ze(["v-virtual-scroll",e.class]),onScrollPassive:c,onScrollend:S,style:He([a.value,e.style])},[I("div",{ref:o,class:"v-virtual-scroll__container",style:{paddingTop:ie(B.value),paddingBottom:ie(_.value)}},[y])])}),{calculateVisibleItems:f,scrollToIndex:R}}});function St(e,s){const l=q(!1);let r;function a(o){cancelAnimationFrame(r),l.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{l.value=!1})})}async function f(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(l.value){const c=X(l,()=>{c(),o()})}else o()})}async function p(o){if(o.key==="Tab"&&s.value?.focus(),!["PageDown","PageUp","Home","End"].includes(o.key))return;const c=e.value?.$el;if(!c)return;(o.key==="Home"||o.key==="End")&&c.scrollTo({top:o.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await f();const S=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const u=c.getBoundingClientRect().top;for(const R of S)if(R.getBoundingClientRect().top>=u){R.focus();break}}else{const u=c.getBoundingClientRect().bottom;for(const R of[...S].reverse())if(R.getBoundingClientRect().bottom<=u){R.focus();break}}}return{onScrollPassive:a,onKeydown:p}}const It=te({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function Pt(e,s){const l=Ke(),r=L(()=>`menu-${l}`),a=ce(()=>Ue(s)),f=ce(()=>r.value);return{menuId:r,ariaExpanded:a,ariaControls:f}}const Ct=te({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:tt,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...It(),...lt({itemChildren:!1})},"Select"),Tt=te({...Ct(),...Ze(et({modelValue:null,role:"combobox"}),["validationValue","dirty"]),...Je({transition:{component:Qe}})},"VSelect"),At=pe()({name:"VSelect",props:Tt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,s){let{slots:l}=s;const{t:r}=$e(),a=ee(),f=ee(),p=ee(),{items:o,transformIn:c,transformOut:S}=je(e),u=ye(e,"modelValue",[],t=>c(t===null?[null]:at(t)),t=>{const m=S(t);return e.multiple?m:m[0]??null}),R=L(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:u.value.length),B=We(e),_=Ge(e),Y=L(()=>u.value.map(t=>t.value)),y=q(!1),w=ce(()=>e.closableChips&&!B.isReadonly.value&&!B.isDisabled.value),{InputIcon:P}=Xe(e);let C="",K=0,U;const F=L(()=>e.hideSelected?o.value.filter(t=>!u.value.some(m=>(e.valueComparator||ve)(m,t))):o.value),le=L(()=>e.hideNoData&&!F.value.length||B.isReadonly.value||B.isDisabled.value),D=ye(e,"menu"),h=L({get:()=>D.value,set:t=>{D.value&&!t&&f.value?.Î¨openChildren.size||t&&le.value||(D.value=t)}}),{menuId:J,ariaExpanded:$,ariaControls:ae}=Pt(e,h),ne=L(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),M=ee(),re=St(M,a);function oe(t){e.openOnClear&&(h.value=!0)}function O(){le.value||(h.value=!h.value)}function de(t){Ve(t)&&ue(t)}function ue(t){if(!t.key||B.isReadonly.value)return;if(["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(h.value=!0),["Escape","Tab"].includes(t.key)&&(h.value=!1),e.clearable&&t.key==="Backspace"){t.preventDefault(),u.value=[],oe();return}t.key==="Home"?M.value?.focus("first"):t.key==="End"&&M.value?.focus("last");const m=1e3;if(!Ve(t))return;const V=performance.now();V-U>m&&(C="",K=0),C+=t.key.toLowerCase(),U=V;const H=F.value;function z(){let v=x();return v||C.at(-1)===C.at(-2)&&(C=C.slice(0,-1),K++,v=x(),v)||(K=0,v=x(),v)?v:(C=t.key.toLowerCase(),x())}function x(){for(let v=K;v<H.length;v++){const W=H[v];if(W.title.toLowerCase().startsWith(C))return[W,v]}}const N=z();if(!N)return;const[i,g]=N;K=g,M.value?.focus(g),e.multiple||(u.value=[i])}function Q(t){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const V=u.value.findIndex(z=>(e.valueComparator||ve)(z.value,t.value)),H=m??!~V;if(~V){const z=H?[...u.value,t]:[...u.value];z.splice(V,1),u.value=z}else H&&(u.value=[...u.value,t])}else{const V=m!==!1;u.value=V?[t]:[],xe(()=>{h.value=!1})}}function n(t){M.value?.$el.contains(t.relatedTarget)||(h.value=!1)}function d(){e.eager&&p.value?.calculateVisibleItems()}function b(){y.value&&a.value?.focus()}function T(t){y.value=!0}function j(t){if(t==null)u.value=[];else if(we(a.value,":autofill")||we(a.value,":-webkit-autofill")){const m=o.value.find(V=>V.title===t);m&&Q(m)}else a.value&&(a.value.value="")}return X(h,()=>{if(!e.hideSelected&&h.value&&u.value.length){const t=F.value.findIndex(m=>u.value.some(V=>(e.valueComparator||ve)(V.value,m.value)));Ae&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{t>=0&&p.value?.scrollToIndex(t)})}}),X(o,(t,m)=>{h.value||y.value&&e.hideNoData&&!m.length&&t.length&&(h.value=!0)}),he(()=>{const t=!!(e.chips||l.chip),m=!!(!e.hideNoData||F.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),V=u.value.length>0,H=be.filterProps(e),z=V||!y.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return k(be,E({ref:a},H,{modelValue:u.value.map(x=>x.props.title).join(", "),name:void 0,"onUpdate:modelValue":j,focused:y.value,"onUpdate:focused":x=>y.value=x,validationValue:u.externalValue,counterValue:R.value,dirty:V,class:["v-select",{"v-select--active-menu":h.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:z,"onClick:clear":oe,"onMousedown:control":O,onBlur:n,onKeydown:ue,"aria-expanded":$.value,"aria-controls":ae.value}),{...l,default:x=>{let{id:N}=x;return I(se,null,[I("select",{hidden:!0,multiple:e.multiple,name:_.fieldName.value},[o.value.map(i=>I("option",{key:i.value,value:i.value,selected:Y.value.includes(i.value)},null))]),k(nt,E({id:J.value,ref:f,modelValue:h.value,"onUpdate:modelValue":i=>h.value=i,activator:"parent",contentClass:"v-select__content",disabled:le.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:d,onAfterLeave:b},ne.value),{default:()=>[m&&k(ot,E({ref:M,selected:Y.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:i=>i.preventDefault(),onKeydown:de,onFocusin:T,tabindex:"-1",selectable:!!F.value.length,"aria-live":"polite","aria-labelledby":`${N.value}-label`,"aria-multiselectable":e.multiple,color:e.itemColor??e.color},re,e.listProps),{default:()=>[l["prepend-item"]?.(),!F.value.length&&!e.hideNoData&&(l["no-data"]?.()??k(Se,{key:"no-data",title:r(e.noDataText)},null)),k(kt,{ref:p,renderless:!0,items:F.value,itemKey:"value"},{default:i=>{let{item:g,index:v,itemRef:W}=i;const G=ut(g.props),Z=E(g.props,{ref:W,key:g.value,onClick:()=>Q(g,null),"aria-posinset":v+1,"aria-setsize":F.value.length});return g.type==="divider"?l.divider?.({props:g.raw,index:v})??k(st,E(g.props,{key:`divider-${v}`}),null):g.type==="subheader"?l.subheader?.({props:g.raw,index:v})??k(rt,E(g.props,{key:`subheader-${v}`}),null):l.item?.({item:g,index:v,props:Z})??k(Se,E(Z,{role:"option"}),{prepend:A=>{let{isSelected:De}=A;return I(se,null,[e.multiple&&!e.hideSelected?k(it,{key:g.value,modelValue:De,ripple:!1,tabindex:"-1","aria-hidden":!0,onClick:Re=>Re.preventDefault()},null):void 0,G.prependAvatar&&k(ct,{image:G.prependAvatar},null),G.prependIcon&&k(ke,{icon:G.prependIcon},null)])}})}}),l["append-item"]?.()]})]}),u.value.map((i,g)=>{function v(A){A.stopPropagation(),A.preventDefault(),Q(i,!1)}const W=E(Ie.filterProps(i.props),{"onClick:close":v,onKeydown(A){A.key!=="Enter"&&A.key!==" "||(A.preventDefault(),A.stopPropagation(),v(A))},onMousedown(A){A.preventDefault(),A.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0}),G=t?!!l.chip:!!l.selection,Z=G?dt(t?l.chip({item:i,index:g,props:W}):l.selection({item:i,index:g})):void 0;if(!(G&&!Z))return I("div",{key:i.value,class:"v-select__selection"},[t?l.chip?k(ft,{key:"chip-defaults",defaults:{VChip:{closable:w.value,size:"small",text:i.title}}},{default:()=>[Z]}):k(Ie,E({key:"chip",closable:w.value,size:"small",text:i.title,disabled:i.props.disabled},W),null):Z??I("span",{class:"v-select__selection-text"},[i.title,e.multiple&&g<u.value.length-1&&I("span",{class:"v-select__selection-comma"},[vt(",")])])])})])},"append-inner":function(){for(var x=arguments.length,N=new Array(x),i=0;i<x;i++)N[i]=arguments[i];return I(se,null,[l["append-inner"]?.(...N),e.menuIcon?k(ke,{class:"v-select__menu-icon",color:a.value?.fieldIconColor,icon:e.menuIcon,"aria-hidden":!0},null):void 0,e.appendInnerIcon&&k(P,{key:"append-icon",name:"appendInner",color:N[0].iconColor.value},null)])}})}),Ye({isFocused:y,menu:h,select:Q},a)}});export{At as V,kt as a,St as b,Ct as m,Pt as u};

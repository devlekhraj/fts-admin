import{_ as w}from"./AppDataTable.vue_vue_type_script_setup_true_lang-CYivNPeK.js";import{l as N}from"./emi-applications.api-U0h5lnZc.js";import{d as S,o as k,c as P,w as a,r as p,a as o,V as y,b,e as z,t as c,u,f as r,n as V,g as v,h as x,i as $}from"./main-Wy1ojlh0.js";import{V as C}from"./lazy-DJ-nEUMV.js";function I(e){const s=typeof e=="number"?e:Number(e);return Number.isNaN(s)?"-":`Rs. ${new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}`}function T(e){if(!e)return"-";const s=e instanceof Date?e:new Date(String(e));if(Number.isNaN(s.getTime()))return"-";const f=String(s.getMonth()+1).padStart(2,"0"),_=String(s.getDate()).padStart(2,"0"),m=String(s.getFullYear()).slice(-2);let i=s.getHours();const l=String(s.getMinutes()).padStart(2,"0"),g=i>=12?"PM":"AM";i=i%12,i=i===0?12:i;const h=String(i).padStart(2,"0");return`${f}/${_}/${m} ${h}:${l} ${g}`}function A(e){switch(e){case"credit_card":return"mdi-credit-card-check";case"new_credit_card":return"mdi-credit-card-plus";case"citizenship":return"mdi-card-account-details";default:return"mdi-card-account-details"}}function D(e){switch(e){case"credit_card":return"info";case"new_credit_card":return"purple";case"citizenship":return"success";default:return"success"}}function E(e){switch(e){case"credit_card":return"text-info";case"new_credit_card":return"text-purple";case"citizenship":return"text-success";default:return"text-success"}}function M(e){switch(typeof e=="string"?Number(e):e){case 0:return"warning";case 1:return"blue";case 2:return"green";case 3:return"indigo";case 4:return"red";default:return"black"}}const W={class:"d-flex align-center gap-2"},B={class:"ml-3"},F={class:"d-flex align-center gap-2"},U={class:"ml-3"},R={style:{"min-width":"150px"},class:"d-flex align-center"},L={class:"text-capitalize"},Y=S({__name:"EmiApplicationsListPage",setup(e){const s=[{title:"REQUEST#",key:"application_code",sortable:!1,minWidth:"120"},{title:"User",key:"user",sortable:!1,minWidth:"200"},{title:"Product",key:"product",sortable:!1,minWidth:"250"},{title:"Time",key:"time",minWidth:"160",sortable:!1},{title:"Per Month",key:"emi_per_month",minWidth:"120",sortable:!1},{title:"EMI Type",key:"emi_type",sortable:!1,minWidth:"120"},{title:"Status",key:"status_label",sortable:!1},{title:"Actions",key:"action",sortable:!1}],f=p([]),_=p(0),m=p(!1),i=p({page:1,itemsPerPage:15,sortBy:[]}),l=p(!1);async function g(){m.value=!0;try{const{data:n}=await N({page:i.value.page,per_page:i.value.itemsPerPage}),d=Array.isArray(n)?n:n?.data??[];f.value=d,_.value=n?.total??n?.meta?.total??d.length}finally{m.value=!1}}function h(n){i.value=n,l.value||(l.value=!0),g()}return k(()=>{l.value||(g(),l.value=!0)}),(n,d)=>($(),P(w,{headers:s,items:f.value,total:_.value,loading:m.value,"items-per-page":i.value.itemsPerPage,"onUpdate:options":h},{"item.user":a(({item:t})=>[r("div",W,[o(x,{size:"32"},{default:a(()=>[o(v,{src:t.user?.avatar,alt:"User"},null,8,["src"])]),_:2},1024),r("span",B,c(t.user?.name??"-"),1)])]),"item.product":a(({item:t})=>[r("div",F,[o(x,{size:"32",rounded:""},{default:a(()=>[o(v,{src:t.product?.thumb,alt:"Product"},null,8,["src"])]),_:2},1024),r("span",U,c(t.product?.name??"-"),1)])]),"item.time":a(({item:t})=>[r("span",null,c(u(T)(t.time)),1)]),"item.emi_per_month":a(({item:t})=>[r("span",null,c(u(I)(t.emi_per_month)),1)]),"item.emi_type":a(({item:t})=>[r("div",R,[o(y,{start:"",class:"mr-2",color:u(D)(t.emi_type),icon:u(A)(t.emi_type)},null,8,["color","icon"]),r("span",{class:V(["text-capitalize",u(E)(t.emi_type)]),style:{"font-weight":"500"}},c(t.emi_type?t.emi_type.split("_").join(" "):"Citizenship"),3)])]),"item.emi_mode":a(({item:t})=>[r("span",L,c(t.emi_mode??"-"),1)]),"item.status_label":a(({item:t})=>[o(C,{size:"small",color:u(M)(t.status),variant:"tonal"},{default:a(()=>[b(c(t.status_label??t.status??"-"),1)]),_:2},1032,["color"])]),"item.action":a(({item:t})=>[o(z,{variant:"tonal",color:"primary",size:"x-small",to:{name:"emi.applications.detail",params:{id:t.id}},icon:""},{default:a(()=>[o(y,null,{default:a(()=>[...d[0]||(d[0]=[b("mdi-eye",-1)])]),_:1})]),_:1},8,["to"])]),_:1},8,["items","total","loading","items-per-page"]))}});export{Y as default};

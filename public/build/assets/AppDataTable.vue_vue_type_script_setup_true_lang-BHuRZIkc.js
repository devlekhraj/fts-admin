import{v as _,aE as ee,ac as ae,z as te,G as se,a as n,A as S,F as oe,$ as r,E as m,g as p,l as le,J as B,a0 as re,d as ne,j as b,w as f,k as de,b as P,aF as ie,aG as ue,f as me,t as ce,q as T,ah as ge,am as ve,aH as k,aI as pe,ai as be,aJ as fe,aK as Pe}from"./main-BnWtN86Z.js";import{d as he,e as ye,f as Se,g as Te,p as Ve,h as De,i as we,u as xe,j as F,k as I,l as G,b as H,n as Be,o as ke,q as Fe,r as Ie,s as Ge,t as He,v as Re}from"./VDataTable-DPjifZvb.js";const $e=oe({itemsLength:{type:[Number,String],required:!0},...Fe(),...ke(),...Be()},"VDataTableServer"),Ce=_()({name:"VDataTableServer",props:$e(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,c){let{attrs:i,slots:a}=c;const{groupBy:t}=he(e),{initialSortOrder:o,sortBy:s,multiSort:d,mustSort:u}=ye(e),{page:g,itemsPerPage:h}=Se(e),{disableSort:R}=ee(e),$=m(()=>parseInt(e.itemsLength,10)),{columns:V,headers:C}=Te(e,{groupBy:t,showSelect:r(()=>e.showSelect),showExpand:r(()=>e.showExpand)}),{items:v}=He(e,V),{toggleSort:D}=Ie({initialSortOrder:o,sortBy:s,multiSort:d,mustSort:u,page:g}),{opened:E,isGroupOpen:N,toggleGroup:j,extractRows:L}=Ge({groupBy:t,sortBy:s,disableSort:R}),{pageCount:q,setItemsPerPage:z}=Ve({page:g,itemsPerPage:h,itemsLength:$}),{flatItems:w}=Re(v,t,E,()=>!!a["group-summary"]),{isSelected:A,select:O,selectAll:W,toggleSelect:J,someSelected:U,allSelected:K}=De(e,{allItems:v,currentPage:v}),{isExpanded:M,toggleExpand:Q}=we(e),x=m(()=>L(v.value));xe({page:g,itemsPerPage:h,sortBy:s,groupBy:t,search:r(()=>e.search)}),re("v-data-table",{toggleSort:D,sortBy:s}),ae({VDataTableRows:{hideNoData:r(()=>e.hideNoData),noDataText:r(()=>e.noDataText),loading:r(()=>e.loading),loadingText:r(()=>e.loadingText)}});const l=m(()=>({page:g.value,itemsPerPage:h.value,sortBy:s.value,pageCount:q.value,toggleSort:D,setItemsPerPage:z,someSelected:U.value,allSelected:K.value,isSelected:A,select:O,selectAll:W,toggleSelect:J,isExpanded:M,toggleExpand:Q,isGroupOpen:N,toggleGroup:j,items:x.value.map(y=>y.raw),internalItems:x.value,groupedItems:w.value,columns:V.value,headers:C.value}));te(()=>{const y=F.filterProps(e),X=I.filterProps(se(e,["multiSort"])),Y=G.filterProps(e),Z=H.filterProps(e);return n(H,S({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Z,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(l.value),default:()=>a.default?a.default(l.value):p(B,null,[a.colgroup?.(l.value),!e.hideDefaultHeader&&p("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[n(I,S(X,{multiSort:!!e.multiSort}),a)]),a.thead?.(l.value),!e.hideDefaultBody&&p("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[a["body.prepend"]?.(l.value),a.body?a.body(l.value):n(G,S(i,Y,{items:w.value}),a),a["body.append"]?.(l.value)]),a.tbody?.(l.value),a.tfoot?.(l.value)]),bottom:()=>a.bottom?a.bottom(l.value):!e.hideDefaultFooter&&p(B,null,[n(le,null,null),n(F,y,{prepend:a["footer.prepend"]})])})})}}),je=ne({__name:"AppDataTable",props:{title:{},headers:{},items:{},total:{},loading:{type:Boolean,default:!1},search:{default:""},searchable:{type:Boolean,default:!0},itemsPerPage:{default:10}},emits:["update:options"],setup(e){const c=e,i=m({get:()=>c.search??"",set:()=>{}}),a=m(()=>c.headers.map(t=>{const o=t.minWidth??t.width;if(!o)return t;const s=`min-width: ${typeof o=="number"?`${o}px`:o};`,d={...t.headerProps??{},style:[t.headerProps?.style,s].filter(Boolean).join(" ")},u={...t.cellProps??{},style:[t.cellProps?.style,s].filter(Boolean).join(" ")};return{...t,headerProps:d,cellProps:u}}));return(t,o)=>(P(),b(de,{class:"elevation-0"},{default:f(()=>[e.title||t.$slots.actions?(P(),b(ie,{key:0,flat:""},{default:f(()=>[e.title?(P(),b(ue,{key:0},{default:f(()=>[me(ce(e.title),1)]),_:1})):T("",!0),n(ge),e.searchable?(P(),b(ve,{key:1,modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=s=>i.value=s),density:"compact",variant:"outlined",label:"Search","hide-details":"",class:"mr-4",style:{"max-width":"240px"}},null,8,["modelValue"])):T("",!0),k(t.$slots,"actions")]),_:3})):T("",!0),n(Ce,{headers:a.value,items:e.items,"items-length":e.total,loading:e.loading,search:i.value,"items-per-page":e.itemsPerPage,"onUpdate:options":o[1]||(o[1]=s=>t.$emit("update:options",s))},pe({_:2},[be(t.$slots,(s,d)=>({name:d,fn:f(u=>[k(t.$slots,d,fe(Pe(u)))])}))]),1032,["headers","items","items-length","loading","search","items-per-page"])]),_:3}))}});export{je as _};

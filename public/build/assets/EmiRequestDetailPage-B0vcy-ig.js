import{d as N,s as G,w as D,v as X,a as y,x as k,e as a,b as l,m as q,p as r,i as e,q as v,y as E,z,k as j,A as M,V as h,f as F,g as U,B as Y,C as Z,r as x,D as ee,E as oe,o as W,F as le,G as H,H as O,I as te,J as ae,c as P,t as m,K as I,L as A,M as ue,h as ne,u as S,l as B,_ as ie,N as re,O as me,j as fe,P as ce,Q as pe,R as be,S as ve,T as _e,U as ye}from"./main-jtG-UPKi.js";import{g as de,b as se,c as ge,d as Ve,f as R,a as xe}from"./formatters-CSrGWYNc.js";import{V as J}from"./VSelect-Co_r_wLT.js";import{V as ke,a as T}from"./VDataTable-CJVTAZds.js";const $e=N({__name:"EmiNabilBankForm",props:{data:{}},setup(i){const g=i,t=x(),f=x(!1),_=G(),b={required:p=>!!p||"Required"},V=["3","6","9","12","18","24"],n=ee({bank_code:"",cardholder_name:"",card_number:"",expiry_date:"",mobile:"",telephone:"",item_name:"",manufactured_by:"",model_name:"",serial_no:"",installment_amount:"",amount_in_words:"",tenure:"",signature_file:null,merchant_name_address:""}),$=x(null);let w=null;D(()=>n.signature_file,p=>{w&&(URL.revokeObjectURL(w),w=null),p instanceof File?(w=URL.createObjectURL(p),$.value=w):$.value=null}),D(()=>g.data,p=>{p&&(n.bank_code=p.bank_code??"",n.cardholder_name=p?.user?.name??"",n.card_number=p.card_number??"",n.expiry_date=p.card_expiry_date??"",n.mobile=p?.user?.mobile??"",n.telephone="",n.item_name=p.product?.name??"",n.manufactured_by="",n.model_name="",n.serial_no="",n.installment_amount=p.finance_amount??p.product_price??"",n.amount_in_words="",n.tenure=p.emi_mode?String(p.emi_mode):"")},{immediate:!0});async function C(){const{valid:p}=await t.value?.validate();if(!p)return;const s=String(g.data?.id??"");if(s){f.value=!0;try{const o=new FormData;Object.entries(n).forEach(([c,u])=>{if(!(u==null||u==="")){if(u instanceof File){o.append(c,u);return}o.append(c,String(u))}});const{data:d}=await de(s,o);console.log(d?.message??"Application generated"),console.log("Generated file path:",d?.path??""),_.onSaved?.(d),_.close()}finally{f.value=!1}}}return(p,s)=>{const o=X("maska");return y(),k(Z,{ref_key:"formRef",ref:t,onSubmit:Y(C,["prevent"])},{default:a(()=>[l(q,null,{default:a(()=>[l(r,{cols:"12"},{default:a(()=>[...s[14]||(s[14]=[e("div",{class:"text-subtitle-2 text-primary"},"Cardholder Details",-1)])]),_:1}),l(r,{cols:"12",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.cardholder_name,"onUpdate:modelValue":s[0]||(s[0]=d=>n.cardholder_name=d),label:"Name of the cardholder",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[E(l(v,{modelValue:n.card_number,"onUpdate:modelValue":s[1]||(s[1]=d=>n.card_number=d),label:"Nabil Credit Card Number",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"]),[[o,"#### #### #### ####"]])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[E(l(v,{modelValue:n.expiry_date,"onUpdate:modelValue":s[2]||(s[2]=d=>n.expiry_date=d),label:"Expiry Date (mm/yy)",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"]),[[o,"##/##"]])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[E(l(v,{modelValue:n.mobile,"onUpdate:modelValue":s[3]||(s[3]=d=>n.mobile=d),label:"Mobile Number",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"]),[[o,"(###) ###-####"]])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[E(l(v,{modelValue:n.telephone,"onUpdate:modelValue":s[4]||(s[4]=d=>n.telephone=d),label:"Telephone Number",density:"comfortable",variant:"outlined",disabled:f.value},null,8,["modelValue","disabled"]),[[o,"(###) ###-####"]])]),_:1}),l(r,{cols:"12"},{default:a(()=>[...s[15]||(s[15]=[e("div",{class:"text-subtitle-2 text-primary"},"Item Details",-1)])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.item_name,"onUpdate:modelValue":s[5]||(s[5]=d=>n.item_name=d),label:"Name of the Item",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.manufactured_by,"onUpdate:modelValue":s[6]||(s[6]=d=>n.manufactured_by=d),label:"Manufactured By",density:"comfortable",variant:"outlined",disabled:f.value},null,8,["modelValue","disabled"])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.model_name,"onUpdate:modelValue":s[7]||(s[7]=d=>n.model_name=d),label:"Model Number/Name",density:"comfortable",variant:"outlined",disabled:f.value},null,8,["modelValue","disabled"])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.serial_no,"onUpdate:modelValue":s[8]||(s[8]=d=>n.serial_no=d),label:"Serial Number",density:"comfortable",variant:"outlined",disabled:f.value},null,8,["modelValue","disabled"])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[l(J,{modelValue:n.tenure,"onUpdate:modelValue":s[9]||(s[9]=d=>n.tenure=d),items:V,label:"Installment tenure (Months)",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[l(z,{modelValue:n.signature_file,"onUpdate:modelValue":s[10]||(s[10]=d=>n.signature_file=d),"prepend-icon":"","prepend-inner-icon":"mdi-image",label:"Signature of Cardholder",density:"comfortable",variant:"outlined",accept:"image/*",disabled:f.value},null,8,["modelValue","disabled"]),$.value?(y(),k(j,{key:0,src:$.value,"max-height":"140",class:"mt-2",contain:""},null,8,["src"])):M("",!0)]),_:1}),l(r,{cols:"12",md:"3",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.installment_amount,"onUpdate:modelValue":s[11]||(s[11]=d=>n.installment_amount=d),label:"Installment Amount",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"])]),_:1}),l(r,{cols:"12",md:"9",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.amount_in_words,"onUpdate:modelValue":s[12]||(s[12]=d=>n.amount_in_words=d),label:"Amount in Words",density:"comfortable",variant:"outlined",disabled:f.value},null,8,["modelValue","disabled"])]),_:1}),l(r,{cols:"12"},{default:a(()=>[...s[16]||(s[16]=[e("div",{class:"text-subtitle-2 text-primary"},"Merchant Details",-1)])]),_:1}),l(r,{cols:"12",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.merchant_name_address,"onUpdate:modelValue":s[13]||(s[13]=d=>n.merchant_name_address=d),label:"Name and address of the Merchant",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"])]),_:1})]),_:1}),l(q,null,{default:a(()=>[l(r,{cols:"12",class:"d-flex justify-space-around"},{default:a(()=>[l(h,{color:"primary",loading:f.value,type:"submit"},{default:a(()=>[l(F,null,{default:a(()=>[...s[17]||(s[17]=[U("mdi-creation",-1)])]),_:1}),s[18]||(s[18]=U(" Generate ",-1))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)}}}),we=N({__name:"EmiSiddharthaBankForm",props:{data:{}},setup(i){const g=i,t=x(),f=x(!1),_=G(),b={required:o=>!!o||"Required"},V=["3","6","9","12","18","24"],n=ee({bank_code:"",cardholder_name:"",address:"",mobile:"",email:"",card_number:"",expiry_date:"",item_name:"",manufactured_by:"",model_name:"",serial_no:"",emi_amount:"",amount_in_words:"",emi_tenure:"",merchant_name:"",requested_by:"",requested_phone:"",signature_file:null,stamp_file:null}),$=x(null),w=x(null);let C=null,p=null;D(()=>n.signature_file,o=>{C&&(URL.revokeObjectURL(C),C=null),o instanceof File?(C=URL.createObjectURL(o),$.value=C):$.value=null}),D(()=>n.stamp_file,o=>{p&&(URL.revokeObjectURL(p),p=null),o instanceof File?(p=URL.createObjectURL(o),w.value=p):w.value=null}),D(()=>g.data,o=>{o&&(n.bank_code=o.bank_code??"",n.cardholder_name=o?.user?.name??"",n.address=o.address??"",n.mobile=o?.user?.mobile??"",n.email=o.email??"",n.card_number=o.card_number??"",n.expiry_date=o.card_expiry_date??"",n.item_name=o.product?.name??"",n.manufactured_by="",n.model_name="",n.serial_no="",n.emi_amount=o.finance_amount??o.product_price??"",n.amount_in_words="",n.emi_tenure=o.emi_mode?String(o.emi_mode):"")},{immediate:!0});async function s(){const{valid:o}=await t.value?.validate();if(!o)return;const d=String(g.data?.id??"");if(d){f.value=!0;try{const c=new FormData;Object.entries(n).forEach(([K,L])=>{if(!(L==null||L==="")){if(L instanceof File){c.append(K,L);return}c.append(K,String(L))}}),console.log("Payload for generating application:",Object.fromEntries(c.entries()));const{data:u}=await de(d,c);console.log(u?.message??"Application generated"),console.log("Generated file path:",u?.path??""),_.onSaved?.(u),_.close()}finally{f.value=!1}}}return(o,d)=>{const c=X("maska");return y(),k(Z,{ref_key:"formRef",ref:t,onSubmit:Y(s,["prevent"])},{default:a(()=>[l(q,null,{default:a(()=>[l(r,{cols:"12"},{default:a(()=>[...d[18]||(d[18]=[e("div",{class:"text-subtitle-2 text-primary"},"Cardholder Details",-1)])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.cardholder_name,"onUpdate:modelValue":d[0]||(d[0]=u=>n.cardholder_name=u),label:"Name of the cardholder",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.address,"onUpdate:modelValue":d[1]||(d[1]=u=>n.address=u),label:"Address",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[E(l(v,{modelValue:n.mobile,"onUpdate:modelValue":d[2]||(d[2]=u=>n.mobile=u),label:"Mobile No.",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"]),[[c,"(###) ###-####"]])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.email,"onUpdate:modelValue":d[3]||(d[3]=u=>n.email=u),label:"Email",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[E(l(v,{modelValue:n.card_number,"onUpdate:modelValue":d[4]||(d[4]=u=>n.card_number=u),label:"SBL Credit Card No.",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"]),[[c,"#### #### #### ####"]])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[E(l(v,{modelValue:n.expiry_date,"onUpdate:modelValue":d[5]||(d[5]=u=>n.expiry_date=u),label:"Expiry Date (mm/yy)",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"]),[[c,"##/##"]])]),_:1}),l(r,{cols:"12"},{default:a(()=>[...d[19]||(d[19]=[e("div",{class:"text-subtitle-2 text-primary"},"Item Details",-1)])]),_:1}),l(r,{cols:"12",md:"12",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.item_name,"onUpdate:modelValue":d[6]||(d[6]=u=>n.item_name=u),label:"Name of the item",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"])]),_:1}),l(r,{cols:"12",md:"4",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.manufactured_by,"onUpdate:modelValue":d[7]||(d[7]=u=>n.manufactured_by=u),label:"Manufactured by",density:"comfortable",variant:"outlined",disabled:f.value},null,8,["modelValue","disabled"])]),_:1}),l(r,{cols:"12",md:"4",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.model_name,"onUpdate:modelValue":d[8]||(d[8]=u=>n.model_name=u),label:"Model No./Name",density:"comfortable",variant:"outlined",disabled:f.value},null,8,["modelValue","disabled"])]),_:1}),l(r,{cols:"12",md:"4",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.serial_no,"onUpdate:modelValue":d[9]||(d[9]=u=>n.serial_no=u),label:"Serial No.",density:"comfortable",variant:"outlined",disabled:f.value},null,8,["modelValue","disabled"])]),_:1}),l(r,{cols:"12",md:"4",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.emi_amount,"onUpdate:modelValue":d[10]||(d[10]=u=>n.emi_amount=u),label:"EMI Loan amount (NPR)",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"])]),_:1}),l(r,{cols:"12",md:"8",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.amount_in_words,"onUpdate:modelValue":d[11]||(d[11]=u=>n.amount_in_words=u),label:"Amount in words",density:"comfortable",variant:"outlined",disabled:f.value},null,8,["modelValue","disabled"])]),_:1}),l(r,{cols:"12",md:"4",class:"py-1"},{default:a(()=>[l(J,{modelValue:n.emi_tenure,"onUpdate:modelValue":d[12]||(d[12]=u=>n.emi_tenure=u),items:V,label:"EMI tenure (months)",density:"comfortable",variant:"outlined",rules:[b.required],disabled:f.value},null,8,["modelValue","rules","disabled"])]),_:1}),l(r,{cols:"12"},{default:a(()=>[...d[20]||(d[20]=[e("div",{class:"text-subtitle-2 text-primary"},"Merchant Details",-1)])]),_:1}),l(r,{cols:"12",md:"12",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.merchant_name,"onUpdate:modelValue":d[13]||(d[13]=u=>n.merchant_name=u),label:"Name of merchant",density:"comfortable",variant:"outlined",disabled:f.value},null,8,["modelValue","disabled"])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[l(v,{modelValue:n.requested_by,"onUpdate:modelValue":d[14]||(d[14]=u=>n.requested_by=u),label:"Requested by",density:"comfortable",variant:"outlined",disabled:f.value},null,8,["modelValue","disabled"])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[E(l(v,{modelValue:n.requested_phone,"onUpdate:modelValue":d[15]||(d[15]=u=>n.requested_phone=u),label:"Phone no.",density:"comfortable",variant:"outlined",disabled:f.value},null,8,["modelValue","disabled"]),[[c,"########## / ##########"]])]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[l(z,{modelValue:n.signature_file,"onUpdate:modelValue":d[16]||(d[16]=u=>n.signature_file=u),"prepend-inner-icon":"mdi-image","prepend-icon":"",label:"Signature",density:"comfortable",variant:"outlined",accept:"image/*",disabled:f.value},null,8,["modelValue","disabled"]),$.value?(y(),k(j,{key:0,src:$.value,"max-height":"140",class:"mt-2",contain:""},null,8,["src"])):M("",!0)]),_:1}),l(r,{cols:"12",md:"6",class:"py-1"},{default:a(()=>[l(z,{modelValue:n.stamp_file,"onUpdate:modelValue":d[17]||(d[17]=u=>n.stamp_file=u),"prepend-inner-icon":"mdi-image","prepend-icon":"",label:"Stamp",density:"comfortable",variant:"outlined",accept:"image/*",disabled:f.value},null,8,["modelValue","disabled"]),w.value?(y(),k(j,{key:0,src:w.value,"max-height":"140",class:"mt-2",contain:""},null,8,["src"])):M("",!0)]),_:1})]),_:1}),l(q,null,{default:a(()=>[l(r,{cols:"12",class:"d-flex justify-space-around"},{default:a(()=>[l(h,{color:"primary",loading:f.value,type:"submit"},{default:a(()=>[l(F,null,{default:a(()=>[...d[21]||(d[21]=[U("mdi-creation",-1)])]),_:1}),d[22]||(d[22]=U(" Generate ",-1))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)}}});function Ue(i){return oe.get("/admin/emi-banks",{params:i})}const Ce={class:"d-flex flex-column"},Ne={style:{"max-width":"400px"}},Se={class:"mt-4"},qe={key:1,class:"text-center text-medium-emphasis py-6"},he={class:"text-error font-weight-semibold"},Fe=N({__name:"EmiRequestForm",props:{id:{},data:{default:null}},setup(i){const g=i,t=x(g.data),f=A(()=>t.value?{...t.value,bank_code:V.value??t.value.bank_code??null}:t.value),_=x([]),b=x(!1),V=x(null),n=A(()=>{switch(V.value?.toLocaleLowerCase()){case"sbl":return we;case"nabil":return $e;default:return null}}),$=A(()=>V.value?_.value.find(o=>o.code===V.value)?.name??V.value:""),w=A(()=>V.value?'The form for "':"Please choose a bank above to generate the request form."),C=A(()=>V.value?'" is not available yet.':"");async function p(){b.value=!0;try{const{data:o}=await Ue();_.value=o?.data??[]}finally{b.value=!1}}async function s(){if(!(!g.id||t.value)){const{data:o}=await se(String(g.id));t.value=o?.data??o??null}}return D(()=>g.data,o=>{o&&(t.value=o)}),W(()=>{p(),s()}),(o,d)=>(y(),k(I,{flat:""},{default:a(()=>[l(le,{class:"d-flex justify-space-between align-center py-1"},{default:a(()=>[d[3]||(d[3]=e("span",{class:"font-semibold"},"Bank Request Form",-1)),l(H),l(h,{icon:"mdi-close",size:"small",color:"error",class:"cursor-pointer",variant:"text","aria-label":"Close",onClick:d[0]||(d[0]=c=>o.$emit("close"))},{default:a(()=>[l(F,null,{default:a(()=>[...d[2]||(d[2]=[U("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(O),l(te,null,{default:a(()=>[e("div",Ce,[d[4]||(d[4]=e("div",{class:"text-subtitle-2 text-primary py-1"},"Preferred Bank",-1)),d[5]||(d[5]=e("div",{class:"text-caption text-medium-emphasis mb-2"}," Select the bank where you want to generate the EMI request. ",-1)),e("div",Ne,[l(J,{modelValue:V.value,"onUpdate:modelValue":d[1]||(d[1]=c=>V.value=c),items:_.value,"item-title":"name","item-value":"code",label:"Select Bank",placeholder:"Select a bank","persistent-placeholder":"",variant:"outlined",density:"comfortable",loading:b.value},null,8,["modelValue","items","loading"])])]),e("div",Se,[n.value?(y(),k(ae(n.value),{key:0,data:f.value??void 0},null,8,["data"])):(y(),P("div",qe,[e("span",null,m(w.value),1),e("span",he,m($.value),1),e("span",null,m(C.value),1)]))])]),_:1})]),_:1}))}}),Re={class:"py-2"},Ie=N({__name:"EmiApprovalForm",props:{id:{},data:{default:null},application:{default:null}},emits:["close","saved"],setup(i,{emit:g}){const t=i,f=g,_=x(""),b=x(""),V=x(""),n=x(""),$=x(""),w=x(!1),C=A(()=>t.data??t.application??null);function p(d){if(!d)return"";const u=(d.split("?")[0]??"").split("/");return u[u.length-1]??""}function s(){const d=C.value??{},c=String(d.bank??d.bank_name??"Bank");_.value=`EMI Application - ${c}`,b.value=String(d.email??d.user?.email??""),V.value="",n.value="",$.value=p(String(d.path??""))}async function o(){const d=C.value??{},c={request_id:t.id??null,subject:_.value,to:b.value,cc:V.value,bcc:n.value,file_name:$.value,application_id:d.id??null};if(c.application_id){w.value=!0;try{const{data:u}=await ge(c.application_id,c);f("saved",u??c),f("close")}catch(u){console.error("Failed to approve application:",u)}finally{w.value=!1}}}return D(C,s,{immediate:!0}),(d,c)=>(y(),k(I,{flat:""},{default:a(()=>[l(le,{class:"d-flex justify-space-between align-center py-1"},{default:a(()=>[c[7]||(c[7]=e("span",{class:"font-semibold"},"Bank Request Form",-1)),l(H),l(h,{icon:"mdi-close",size:"small",color:"error",class:"cursor-pointer",variant:"text","aria-label":"Close",onClick:c[0]||(c[0]=u=>d.$emit("close"))},{default:a(()=>[l(F,null,{default:a(()=>[...c[6]||(c[6]=[U("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(O),l(te,null,{default:a(()=>[l(q,null,{default:a(()=>[l(r,{cols:"12"},{default:a(()=>[l(v,{modelValue:_.value,"onUpdate:modelValue":c[1]||(c[1]=u=>_.value=u),label:"Subject",variant:"outlined",density:"comfortable"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",md:"12"},{default:a(()=>[l(v,{modelValue:b.value,"onUpdate:modelValue":c[2]||(c[2]=u=>b.value=u),label:"To",variant:"outlined",density:"comfortable"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",md:"12"},{default:a(()=>[l(v,{modelValue:V.value,"onUpdate:modelValue":c[3]||(c[3]=u=>V.value=u),label:"CC",variant:"outlined",density:"comfortable"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",md:"12"},{default:a(()=>[l(v,{modelValue:n.value,"onUpdate:modelValue":c[4]||(c[4]=u=>n.value=u),label:"BCC",variant:"outlined",density:"comfortable"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12"},{default:a(()=>[l(v,{modelValue:$.value,"onUpdate:modelValue":c[5]||(c[5]=u=>$.value=u),label:"Attachment File Name",variant:"outlined",density:"comfortable",readonly:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(ue,{class:"d-flex justify-space-around"},{default:a(()=>[e("div",Re,[l(h,{color:"primary",loading:w.value,variant:"tonal","prepend-icon":"mdi-check-decagram-outline",onClick:o},{default:a(()=>[...c[8]||(c[8]=[U(" Approve & Send Email ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1}))}}),Ae={class:"info-card"},Ee={class:"d-flex align-center justify-space-between mb-2"},De={class:""},Be={class:"d-flex justify-end gap-2"},Le=N({__name:"EmiBankApplicationList",props:{data:{}},setup(i){const g=[{title:"Bank",key:"bank",align:"start",width:"200"},{title:"Status",key:"status",align:"start",width:"100"},{title:"Date",key:"date",align:"start",width:"150"},{title:"Action",key:"action",align:"end",sortable:!1,width:"160"}],t=i,f=G(),_=x(!1),b=x([]),V=A(()=>b.value.map(s=>({id:s.id,bank:s.bank_name??"--",status:s.status??"--",date:s.date??"--",path:s.file_url??s.file_path??""})));async function n(){const s=String(t.data?.id??"");if(s){_.value=!0;try{const{data:o}=await Ve(s);b.value=o?.data??[]}finally{_.value=!1}}}function $(){f.open(Fe,{id:t.data?.id},{size:"lg",onSaved:()=>{n()}})}function w(s){s&&window.open(s,"_blank")}function C(s){console.log("Approving application:",{item:s}),f.open(Ie,{id:t.data?.id,data:{...s,email:t.data?.email??t.data?.user?.email??""}},{title:`Approve - ${s.bank}`,size:"lg",onSaved:()=>{n()}})}function p(s){if(!s)return;const o=document.createElement("a");o.href=s,o.download="",o.click()}return D(()=>t.data?.id,()=>{n()},{immediate:!0}),W(()=>{n()}),(s,o)=>(y(),k(I,{elevation:"0",class:"pa-4"},{default:a(()=>[e("div",Ae,[e("div",Ee,[o[3]||(o[3]=e("div",null,[e("h4",null,"Generated Requests")],-1)),t.data?.status.toLowerCase()!=="approved"?(y(),k(h,{key:0,color:"primary",onClick:o[0]||(o[0]=d=>$())},{default:a(()=>[l(F,{left:""},{default:a(()=>[...o[1]||(o[1]=[U("mdi-file-plus",-1)])]),_:1}),o[2]||(o[2]=U(" Generate Now ",-1))]),_:1})):M("",!0)]),l(O,{class:"my-2"}),l(ke,{headers:g,items:V.value,density:"comfortable",class:"elevation-0",loading:_.value},{"item.status":a(({item:d})=>[e("div",De,[l(ne,{class:"text-capitalize",color:d.status.toLowerCase()==="approved"?"success":"warning","text-color":"white",size:"small"},{default:a(()=>[U(m(d.status??"--"),1)]),_:2},1032,["color"])])]),"item.action":a(({item:d})=>[e("div",Be,[l(h,{variant:"tonal",color:"primary",class:"mr-4",size:"x-small",icon:"",disabled:!d.path,onClick:c=>w(d.path)},{default:a(()=>[l(F,null,{default:a(()=>[...o[4]||(o[4]=[U("mdi-eye",-1)])]),_:1})]),_:1},8,["disabled","onClick"]),l(h,{variant:"tonal",color:"primary",class:"mr-4",size:"x-small",icon:"",disabled:!d.path,onClick:c=>C(d)},{default:a(()=>[l(F,null,{default:a(()=>[...o[5]||(o[5]=[U("mdi-email-arrow-right",-1)])]),_:1})]),_:1},8,["disabled","onClick"]),l(h,{variant:"tonal",color:"primary",size:"x-small",icon:"",disabled:!d.path,onClick:c=>p(d.path)},{default:a(()=>[l(F,null,{default:a(()=>[...o[6]||(o[6]=[U("mdi-download",-1)])]),_:1})]),_:1},8,["disabled","onClick"])])]),_:1},8,["items","loading"])])]),_:1}))}}),Me={class:"emi-info-grid"},Te={class:"pt-4"},je={class:"text-right"},Pe={class:"text-right"},Oe={class:"text-right"},ze={class:"text-right"},Ge={class:"text-right"},We={class:"text-right"},He={class:"text-right"},Je={key:0},Ke={class:"text-right"},Qe={key:1},Xe={class:"text-right"},Ye={class:"text-right"},Ze={class:"pt-4"},el=N({__name:"TabEmiInfo",props:{data:{}},setup(i){return(g,t)=>(y(),k(B,{class:"pt-0",fluid:""},{default:a(()=>[l(I,null,{default:a(()=>[e("div",null,[e("div",Me,[e("div",Te,[l(T,null,{default:a(()=>[e("tbody",null,[e("tr",null,[t[0]||(t[0]=e("td",null,"Request Code",-1)),e("td",je,m(i.data.application_code),1)]),t[10]||(t[10]=e("tr",null,[e("td",null,"EMI Type"),e("td",{class:"text-right"},"n/a")],-1)),e("tr",null,[t[1]||(t[1]=e("td",null,"User",-1)),e("td",Pe,m(i.data.user?.name||"N/A"),1)]),e("tr",null,[t[2]||(t[2]=e("td",null,"Product",-1)),e("td",Oe,m(i.data.product?.name||"N/A"),1)]),e("tr",null,[t[3]||(t[3]=e("td",null,"Price",-1)),e("td",ze,m(S(R)(i.data.product_price)),1)]),e("tr",null,[t[4]||(t[4]=e("td",null,"Service Charge",-1)),e("td",Ge,m(S(R)(i.data.service_charge)),1)]),e("tr",null,[t[5]||(t[5]=e("td",null,"EMI Amount",-1)),e("td",We,m(S(R)(i.data.emi_per_month)),1)]),e("tr",null,[t[6]||(t[6]=e("td",null,"EMI Mode",-1)),e("td",He,m(i.data.emi_mode)+" Months",1)]),i.data.emi_finance_id?(y(),P("tr",Je,[t[7]||(t[7]=e("td",null,"Finance From",-1)),e("td",Ke,m(i.data.finance.name),1)])):M("",!0),i.data.bank?(y(),P("tr",Qe,[t[8]||(t[8]=e("td",null,"Bank Name",-1)),e("td",Xe,m(i.data?.bankDetail?.name),1)])):M("",!0),e("tr",null,[t[9]||(t[9]=e("td",null,"Applied On",-1)),e("td",Ye,m(S(xe)(i.data.created_at)),1)])])]),_:1})]),t[11]||(t[11]=e("div",{class:"emi-info-divider"},null,-1)),e("div",Ze,[l(Le,{data:i.data},null,8,["data"])])])])]),_:1})]),_:1}))}}),Q=ie(el,[["__scopeId","data-v-af2ef670"]]),ll={class:"border rounded"},tl={class:"text-right"},al={class:"text-right"},nl={class:"text-right"},dl={class:"text-right"},sl={class:"text-right"},ol={class:"text-right"},ul=N({__name:"TabEmploymentInfo",props:{data:{}},setup(i){return(g,t)=>(y(),k(B,{fluid:""},{default:a(()=>[l(q,null,{default:a(()=>[l(r,{cols:"12",lg:"6","offset-lg":"3"},{default:a(()=>[e("div",ll,[l(T,null,{default:a(()=>[e("tbody",null,[e("tr",null,[t[0]||(t[0]=e("td",null,"Occupation",-1)),e("td",tl,m(i.data.occupation),1)]),e("tr",null,[t[1]||(t[1]=e("td",null,"Occupation Type",-1)),e("td",al,m(i.data.occupation_type),1)]),e("tr",null,[t[2]||(t[2]=e("td",null,"Length of Employment",-1)),e("td",nl,m(i.data.length_of_employment)+" yrs",1)]),e("tr",null,[t[3]||(t[3]=e("td",null,"Monthly Income",-1)),e("td",dl,"Rs. "+m(S(R)(i.data.monthly_income)),1)]),e("tr",null,[t[4]||(t[4]=e("td",null,"Monthly Expenses",-1)),e("td",sl,"Rs. "+m(S(R)(i.data.monthly_expenses)),1)]),e("tr",null,[t[5]||(t[5]=e("td",null,"No. of Dependents",-1)),e("td",ol,m(i.data.no_of_dependents),1)])])]),_:1})])]),_:1})]),_:1})]),_:1}))}}),il={class:"text-right"},rl={class:"text-right"},ml={class:"text-right"},fl={class:"text-right"},cl={class:"text-right"},pl={class:"text-right"},bl={class:"text-right"},vl=N({__name:"TabCardInfo",props:{data:{}},setup(i){return(g,t)=>(y(),k(B,{fluid:""},{default:a(()=>[l(q,null,{default:a(()=>[l(r,{cols:"12",lg:"6","offset-lg":"3"},{default:a(()=>[l(I,{class:"pa-4"},{default:a(()=>[l(T,null,{default:a(()=>[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",null,"Field"),e("th",{class:"text-right"},"Value")])],-1)),e("tbody",null,[e("tr",null,[t[0]||(t[0]=e("td",null,"Credit Card",-1)),e("td",il,m(i.data.credit_card),1)]),e("tr",null,[t[1]||(t[1]=e("td",null,"Card Holder Name",-1)),e("td",rl,m(i.data.card_holder_name),1)]),e("tr",null,[t[2]||(t[2]=e("td",null,"Card Number",-1)),e("td",ml,m(i.data.card_number),1)]),e("tr",null,[t[3]||(t[3]=e("td",null,"Card Limit",-1)),e("td",fl,m(S(R)(i.data.card_limit)),1)]),e("tr",null,[t[4]||(t[4]=e("td",null,"Card Expiry",-1)),e("td",cl,m(i.data.card_expiry_date),1)]),e("tr",null,[t[5]||(t[5]=e("td",null,"Bank",-1)),e("td",pl,m(i.data.bankDetail?.name),1)]),e("tr",null,[t[6]||(t[6]=e("td",null,"Account Number",-1)),e("td",bl,m(i.data.account_number),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),_l={class:"text-right"},yl={class:"text-right"},gl={class:"text-right"},Vl={class:"text-right"},xl={class:"text-right"},kl={class:"text-right"},$l=N({__name:"TabGuarantorInfo",props:{data:{}},setup(i){return(g,t)=>(y(),k(B,{fluid:""},{default:a(()=>[l(q,null,{default:a(()=>[l(r,{cols:"12",lg:"6","offset-lg":"3"},{default:a(()=>[l(I,{class:"pa-4"},{default:a(()=>[l(T,null,{default:a(()=>[t[6]||(t[6]=e("thead",null,[e("tr",null,[e("th",null,"Field"),e("th",{class:"text-right"},"Value")])],-1)),e("tbody",null,[e("tr",null,[t[0]||(t[0]=e("td",null,"Name",-1)),e("td",_l,m(i.data.guarantor_name||"N/A"),1)]),e("tr",null,[t[1]||(t[1]=e("td",null,"Email",-1)),e("td",yl,m(i.data.guarantor_email),1)]),e("tr",null,[t[2]||(t[2]=e("td",null,"Phone",-1)),e("td",gl,m(i.data.guarantor_mobile),1)]),e("tr",null,[t[3]||(t[3]=e("td",null,"Address",-1)),e("td",Vl,m(i.data.guarantor_address),1)]),e("tr",null,[t[4]||(t[4]=e("td",null,"Father's Name",-1)),e("td",xl,m(i.data.guarantor_father),1)]),e("tr",null,[t[5]||(t[5]=e("td",null,"Grandfather's Name",-1)),e("td",kl,m(i.data.guarantor_grand_father),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),wl={class:"text-right"},Ul={class:"text-right"},Cl={class:"text-right"},Nl={class:"text-right"},Sl={class:"text-right"},ql=N({__name:"TabVehicleInfo",props:{data:{}},setup(i){return(g,t)=>(y(),k(B,{fluid:""},{default:a(()=>[l(q,null,{default:a(()=>[l(r,{cols:"12",lg:"6","offset-lg":"3"},{default:a(()=>[l(I,{class:"pa-4"},{default:a(()=>[l(T,null,{default:a(()=>[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",null,"Field"),e("th",{class:"text-right"},"Value")])],-1)),e("tbody",null,[e("tr",null,[t[0]||(t[0]=e("td",null,"Vehicle",-1)),e("td",wl,m(i.data.vehicle),1)]),e("tr",null,[t[1]||(t[1]=e("td",null,"Down Payment",-1)),e("td",Ul,m(S(R)(i.data.down_payment)),1)]),e("tr",null,[t[2]||(t[2]=e("td",null,"Finance Amount",-1)),e("td",Cl,m(S(R)(i.data.finance_amount)),1)]),e("tr",null,[t[3]||(t[3]=e("td",null,"Finance Type",-1)),e("td",Nl,m(i.data.emi_type),1)]),e("tr",null,[t[4]||(t[4]=e("td",null,"Residental Status",-1)),e("td",Sl,m(i.data.residental_status),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),hl=N({__name:"TabDocuments",props:{data:{}},setup(i){return(g,t)=>(y(),k(B,{fluid:""},{default:a(()=>[l(q,null,{default:a(()=>[l(r,{cols:"12",lg:"6","offset-lg":"3"},{default:a(()=>[...t[0]||(t[0]=[e("div",null,[e("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Blanditiis, quia.")],-1)])]),_:1})]),_:1})]),_:1}))}}),Fl={class:"text-right"},Rl={class:"text-right"},Il={class:"text-right"},Al={class:"text-right"},El={class:"text-right"},Dl={class:"text-right"},Bl=N({__name:"TabMerchant",props:{data:{}},setup(i){return(g,t)=>(y(),k(B,{fluid:""},{default:a(()=>[l(q,null,{default:a(()=>[l(r,{cols:"12",lg:"6","offset-lg":"3"},{default:a(()=>[l(I,{class:"pa-4"},{default:a(()=>[l(T,null,{default:a(()=>[t[6]||(t[6]=e("thead",null,[e("tr",null,[e("th",null,"Field"),e("th",{class:"text-right"},"Value")])],-1)),e("tbody",null,[e("tr",null,[t[0]||(t[0]=e("td",null,"Name",-1)),e("td",Fl,m(i.data.name),1)]),e("tr",null,[t[1]||(t[1]=e("td",null,"Email",-1)),e("td",Rl,m(S(R)(i.data.email)),1)]),e("tr",null,[t[2]||(t[2]=e("td",null,"Phone",-1)),e("td",Il,m(S(R)(i.data.phone)),1)]),e("tr",null,[t[3]||(t[3]=e("td",null,"Stamp",-1)),e("td",Al,m(i.data.stamp),1)]),e("tr",null,[t[4]||(t[4]=e("td",null,"Logo",-1)),e("td",El,m(i.data.logo),1)]),e("tr",null,[t[5]||(t[5]=e("td",null,"Signature",-1)),e("td",Dl,m(i.data.signature),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),Ll={class:"d-flex align-center justify-space-between mb-4"},Ml={class:"d-flex align-center gap-4"},Tl={class:"ml-4"},jl={class:"text-subtitle-1 font-weight-semibold"},Pl={class:"text-caption text-medium-emphasis"},Ol={class:"text-caption text-medium-emphasis"},Jl=N({__name:"EmiRequestDetailPage",setup(i){const g=re(),t=me(),f={emi:Q,employment:ul,card:vl,guarantor:$l,vehicle:ql,documents:hl,merchant:Bl},_=x("emi"),b=[{value:"emi",label:"EMI Info",icon:"mdi-cash"},{value:"documents",label:"Documents",icon:"mdi-file-document-outline"},{value:"card",label:"Card Info",icon:"mdi-credit-card-outline"},{value:"employment",label:"Employment Info",icon:"mdi-briefcase-outline"},{value:"guarantor",label:"Guarantor Info",icon:"mdi-account-tie-outline"},{value:"vehicle",label:"Vehicle Info",icon:"mdi-motorbike"}],V=A(()=>f[_.value]??Q),n=x({user:{name:"",email:"",phone:"",avatar:""},status:""}),$=A(()=>{const p=String(n.value.status??"").toLowerCase();return p==="approved"?"success":p==="pending"?"warning":p==="processing"?"info":"secondary"});async function w(){const p=String(g.params.id??"");if(p)try{const{data:s}=await se(p);n.value={...n.value,...s}}catch{}}function C(){t.back()}return W(w),(p,s)=>(y(),k(B,{fluid:"",class:"pa-0"},{default:a(()=>[e("div",Ll,[l(h,{variant:"text",onClick:C},{default:a(()=>[l(F,{start:""},{default:a(()=>[...s[2]||(s[2]=[U("mdi-arrow-left",-1)])]),_:1}),s[3]||(s[3]=U(" Back ",-1))]),_:1})]),l(I,{class:"pa-4 mb-4"},{default:a(()=>[e("div",Ml,[l(fe,{size:"64",rounded:""},{default:a(()=>[n.value.user?.avatar?(y(),k(j,{key:0,src:n.value?.user?.avatar,alt:"User"},null,8,["src"])):(y(),k(j,{key:1,src:"https://placehold.co/64",alt:"User"}))]),_:1}),e("div",Tl,[e("div",jl,m(n.value.user?.name??"N/A"),1),e("div",Pl,m(n.value.user?.email??"N/A"),1),e("div",Ol,m(n.value.user?.phone??"N/A"),1)]),l(H),l(ne,{size:"small",variant:"tonal",color:$.value},{default:a(()=>[U(m(n.value.status),1)]),_:1},8,["color"])])]),_:1}),l(I,null,{default:a(()=>[l(ce,{modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=o=>_.value=o),density:"comfortable","show-arrows":"",color:"primary"},{default:a(()=>[(y(),P(pe,null,be(b,o=>l(ve,{key:o.value,value:o.value},{default:a(()=>[l(F,{start:"",size:"16"},{default:a(()=>[U(m(o.icon),1)]),_:2},1024),U(" "+m(o.label),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(O,{class:"mt-0"}),l(_e,{modelValue:_.value,"onUpdate:modelValue":s[1]||(s[1]=o=>_.value=o)},{default:a(()=>[l(ye,{value:_.value},{default:a(()=>[(y(),k(ae(V.value),{data:n.value},null,8,["data"]))]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1}))}});export{Jl as default};
